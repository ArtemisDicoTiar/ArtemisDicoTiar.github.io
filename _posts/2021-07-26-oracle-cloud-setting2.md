---

title: Oracle Cloud Setting 2

categories:
  - Cloud Server
last_modified_at: 2021-07-26

tags: [oracle cloud, server, setting]

---

# 오라클 클라우드 서버 설정 2

1에서 설정 금방 끝날 줄 알았더니 뭔가 안된다. IAM설정같은 거 스킵하고 대충 쓱싹 했더니 그런거 같다.

[이 블로그](https://hoing.io/archives/17164)를 참고해서 진행해보자.

1. 구획 생성 (Compartment)
   1. 루트(내이름) 밑으로 구획(storytellerMDBS)을 생성했다.
2. VCN (Virtual Cloud Network) 생성
   1. 이건 앞에서 끄적거리다가 하나 만들어놨다.
   2. 방법만 맞게 했는지 보자
   3. 구획이 안 맞다 리소스 이동으로 구획 이동 완료
3. 정책 추가 (Policy)
   1. 그룹, 유저별 제한사항 설정인가?
4. 사용자 생성 (User)
   1. 비밀번호 생성 → 메모해두기
5. 그룹생성 (Group)
   1. User add
6. MySQL DB 생성
   1. 이것도 한거니깐 보고 틀린거 있으면 수정하자
   2. DB유저랑 비밀번호 동일하게 해야한다네 ㅠㅠ 다시 만들자
   3. 아니네 에잇
   4. 호스트 이름만 설정하자 안해두면 엔드포인트가 생성안된다고 하니 
      1. hostname: storyteller

여기까지가 위에 링크한 블로그 1편이다

바로 2편 내용을 이어서하자.

1. DB생성이 시간이 제일 오래걸리네 기다리자
   1. 진짜 오래걸렸다 거의 5~10분?
2. 네트워크 수신 규칙 추가 해야한다. 포트포워딩 같은거 같다
   1. 뭐지 서브넷 어디갔어
   2. DB연결해놓은 전용서브넷으로 가니깐 전에 설정한거 그대로 있다.
   3. 이거 이용하자.
3. Bastion Host (이게 게이트웨이인거 같다)
   1. 이것도 전에 설치해놨으니 패쓰
   2. ssh접속해서 mysql 접근해보자
   3. 지난번에 할때도 여기서 막혔는데 제발... ㅠ
   4. 구획이 잘못되어 있었다 수정.
   5. 느낌에 미리 만들어놓은 애들 구획 이동만 해서 문제가 생기는 거 같다 아예 지우고 다시



1. 역시 VCN에 굉장히 복잡하게 꼬여있었다
2. VCN부터 다시 → 끝
3. 디비 다시 생성 → 생성중 (오래 걸리니깐 인스턴스랑 3306 규칙 지금 만들자)
4. mysql port security rule → 끝
5. 인스턴스 → 생성중... → 끝
   1. sql관련 내용 설치하자
   2. 다했는 데 아직도 DB생성중이네
   3. 라고 쓰자마자 끝났네 ㅋㅋ
6. 오 된다.
7. 역시 순서나 내용 멋대로 바꾸면 문제야... ㅋㅋㅋ
8. 그러면 이제 DataGrip에서 잡히는 지 확인.
   1. ssh통해서 접속한다는 설정을 해야한다.
   2. DB추가 할때 ssh/ssl탭에서 설정.
   3. 그 이후 포트 유저, 비밀번호 설정은 MySQL 에 달려있는 대로.
9. 근데 이것도 좋긴한데 그냥 GW에 SSH터널링 걸면 안됨..?
   1. https://hoing.io/archives/5419
   2. 안해놓으면 DB접근할 때 이렇게 해야하는데 ㅠㅠ
      1. https://stackoverflow.com/questions/30188796/connecting-to-mysql-database-via-ssh
   3.  고가용성(HA) 처리하면 ssh 안하고 접근가능한거 같은데..?
      1. HA로 config변경해보고 안되면 다시 원래대로
      2. 그게 아니였다 ㅠㅠ
   4. 1번으로 해결해야하는 거 같은데..
   5. 1번 링크 너무 어려운건지 조잡한건지 못알아 먹겠다 ㅠㅠ
      1. https://smashingpks.github.io/ssh/mysql/ps-ssh-tunneling-mysql/ 
   6. 위에 링크로 다시 이해해보자
   7. 에라이 다 개인 로컬 피씨에 설정하는 거다
   8. nginx로 리버스 프록시 따야겠다
   9. 

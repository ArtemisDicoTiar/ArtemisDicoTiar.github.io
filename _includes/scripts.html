{% if jekyll.environment == 'production' and site.google_analytics %}
  {% include google-analytics.html %}
{% endif %}

<script async src="{{ '/assets/javascripts/main.js' | relative_url }}"></script>

{% if site.search %}
  {%- assign search_provider = site.search_provider | default: "lunr" -%}
  {%- case search_provider -%}
    {%- when "lunr" -%}
      {% include search/lunr-search-scripts.html %}
    {%- when "algolia" -%}
      {% include search/algolia-search-scripts.html %}
  {%- endcase -%}
{% endif %}

<script type="text/javascript">
  $("script[type='math/tex']").replaceWith(
    function () {
      var tex = $(this).text();
      return katex.renderToString(tex, { displayMode: false });
    });

  $("script[type='math/tex; mode=display']").replaceWith(
    function () {
      var tex = $(this).text();
      return katex.renderToString(tex.replace(/%.*/g, ''), { displayMode: true });
    });
</script>
